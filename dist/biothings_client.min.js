var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,e,g){f!=Array.prototype&&f!=Object.prototype&&(f[e]=g.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var f=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+f++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var e=0;return $jscomp.iteratorPrototype(function(){return e<f.length?{done:!1,value:f[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=f[Symbol.iterator];return e?e.call(f):$jscomp.arrayIterator(f)};
$jscomp.polyfill=function(f,e,g,l){if(e){g=$jscomp.global;f=f.split(".");for(l=0;l<f.length-1;l++){var d=f[l];d in g||(g[d]={});g=g[d]}f=f[f.length-1];l=g[f];e=e(l);e!=l&&null!=e&&$jscomp.defineProperty(g,f,{configurable:!0,writable:!0,value:e})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(f){function e(){this.batch_=null}function g(a){return a instanceof d?a:new d(function(b,c){b(a)})}if(f&&!$jscomp.FORCE_POLYFILL_PROMISE)return f;e.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};e.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var l=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(a){l(a,
0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};e.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(c){b.reject(c)}};d.prototype.createResolveAndReject_=
function(){function a(a){return function(h){c||(c=!0,a.call(b,h))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(c){this.reject_(c);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var k=new e;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(h){c.reject(h)}};d.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{h(a(b))}catch(n){f(n)}}:b}var h,f,e=new d(function(a,
b){h=a;f=b});this.callWhenSettled_(c(a,h),c(b,f));return e};d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function c(){switch(f.state_){case 1:a(f.result_);break;case 2:b(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?k.asyncExecute(c):this.onSettledCallbacks_.push(function(){k.asyncExecute(c)})};d.resolve=g;d.reject=function(a){return new d(function(b,c){c(a)})};d.race=function(a){return new d(function(b,
c){for(var f=$jscomp.makeIterator(a),e=f.next();!e.done;e=f.next())g(e.value).callWhenSettled_(b,c)})};d.all=function(a){var b=$jscomp.makeIterator(a),c=b.next();return c.done?g([]):new d(function(a,f){function e(b){return function(c){h[b]=c;m--;0==m&&a(h)}}var h=[],m=0;do h.push(void 0),m++,g(c.value).callWhenSettled_(e(h.length-1),f),c=b.next();while(!c.done)})};return d},"es6","es3");
$jscomp.checkStringArgs=function(f,e,g){if(null==f)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return f+""};
$jscomp.polyfill("String.prototype.startsWith",function(f){return f?f:function(f,g){var e=$jscomp.checkStringArgs(this,f,"startsWith");f+="";var d=e.length,k=f.length;g=Math.max(0,Math.min(g|0,e.length));for(var a=0;a<k&&g<d;)if(e[g++]!=f[a++])return!1;return a>=k}},"es6","es3");
(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).biothings_client=f()})(function(){return function d(e,g,l){function k(b,h){if(!g[b]){if(!e[b]){var c="function"==typeof require&&require;if(!h&&c)return c(b,!0);if(a)return a(b,!0);h=Error("Cannot find module '"+b+"'");throw h.code="MODULE_NOT_FOUND",h;}h=
g[b]={exports:{}};e[b][0].call(h.exports,function(a){var c=e[b][1][a];return k(c?c:a)},h,h.exports,d,e,g,l)}return g[b].exports}for(var a="function"==typeof require&&require,b=0;b<l.length;b++)k(l[b]);return k}({1:[function(e,g,l){function d(a,e){var h=function(a,b,c){for(var d=Promise.resolve(),h=[],m=0;m<a.length;m+=e.step)(function(){var g=a.slice(m,m+e.step);d=d.then(function(){return b(g)}).then(function(a){h=h.concat(c(a))})})();return d.then(function(){return h})},d={get_step:function(){return e.step},
set_step:function(a){e.step=a},reset_step:function(){step=e.default_step},get_metadata:function(a){a=a||{};return d.request_get(e.url+e.metadata_endpoint,a,!1)},get_annotation:function(a,b,c){c=c||{};b instanceof Array&&(b=b.join(","));a=e.url+e.annotation_endpoint+a;b&&(c.fields=b);return d.request_get(a,c,!0)},get_annotations:function(a,b){b=b||{};"string"==typeof a&&(a=a.split(","));var c=e.url+e.annotation_endpoint;if(a.length<e.step)return b.ids=a.join(","),d.request_post(c,{ids:a.join(",")});
h(a,function(a){b.ids=a.join(",");return d.request_post(c,b)},function(a){return a})},get_fields:function(a,b){b=b||{};var c=e.url+e.metadata_fields_endpoint;a&&(b.search=a);return d.request_get(c,b)},query:function(a,c,h){h=h||"GET";var g={q:a};b(g,c);var k=e.url+e.query_endpoint;g.fields instanceof Array&&(g.fields=g.fields.join(","));var m="GET"==h?d.request_get:d.request_post;return g.fetch_all?m(k,g,!1).then(function(a){var b=a.total,c=a.hits;g.scroll_id=a._scroll_id;a=Promise.resolve(a);for(var d=
e.step;d<b;d+=e.step)a=a.then(function(a){return m(k,g,!1).then(function(a){c=c.concat(a.hits);return a})});return a.then(function(){return c})}):m(k,g,!1).then(function(a){if(a instanceof Array)for(var b in a)delete a[b]._score;return a})},query_many:function(a,b){"string"==typeof a&&(a=a.split(","));return h(a,function(a){return d.query(a.join(","),b,"POST")},function(a){return a})},request_get:function(a,b,c){b=b||{};c=c||!1;a={url:a,method:"get",params:b};c&&(a.validateStatus=function(a){return 200<=
a&&300>a||404==a});return k.request(a).then(function(a){return c&&404==a.status?null:a.data})},request_post:function(a,b){b=b||{};return k.request({url:a,method:"post",params:b,headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(a){return a.data})}};d["get"+a]=d.get_annotation;d["get"+a+"s"]=d.get_annotations;c[a]&&b(d,c[a](d));return d}var k=l=e("axios"),a=e("./client_configs.json"),b=e("extend"),c=e("./client_extension");l.defaults.headers["user-agent"]="biothings_client Node.JS package";
common_args={query_endpoint:"/query/",metadata_endpoint:"/metadata",metadata_fields_endpoint:"/metadata/fields",top_level_jsonld_uris:[],delay:1,step:1E3,scroll_size:1E3,max_query:1E3};g.exports={get_client:function(c,e){e=e||{};c=c.toLowerCase();if(!a[c]&&!e.url)return null;client_settings={};b(client_settings,common_args,a[c]);client_settings.default_step=client_settings.step;return d(c,client_settings)}}},{"./client_configs.json":2,"./client_extension":3,axios:"axios",extend:"extend"}],2:[function(e,
g,l){g.exports={gene:{url:"http://mygene.info/v3",pkg_user_agent_header:"MyGene.py",annotation_endpoint:"/gene/",optionally_plural_object_type:"gene(s)",default_cache_file:"mygene_cache",entity:"gene"},variant:{url:"http://myvariant.info/v1",pkg_user_agent_header:"MyVariant.py",annotation_endpoint:"/variant/",optionally_plural_object_type:"variant(s)",default_cache_file:"myvariant_cache",entity:"variant",top_level_jsonld_uris:"http://schema.myvariant.info/datasource/cadd http://schema.myvariant.info/datasource/clinvar http://schema.myvariant.info/datasource/dbnsfp http://schema.myvariant.info/datasource/dbsnp http://schema.myvariant.info/datasource/docm http://schema.myvariant.info/datasource/emv http://schema.myvariant.info/datasource/evs http://schema.myvariant.info/datasource/gwassnps http://schema.myvariant.info/datasource/mutdb http://schema.myvariant.info/datasource/snpeff".split(" ")},
chem:{url:"http://mychem.info/v1",pkg_user_agent_header:"MyChem.py",annotation_endpoint:"/chem/",optionally_plural_object_type:"chem(s)",entity:"chem",default_cache_file:"mychem_cache",step:10,max_query:10},taxon:{url:"http://t.biothings.io/v1",pkg_user_agent_header:"MyTaxon.py",annotation_endpoint:"/taxon/",optionally_plural_object_type:"taxon/taxa",entity:"taxon",default_cache_file:"mytaxon_cache"}}},{}],3:[function(e,g,l){g.exports={variant:function(e){return{normalize_vcf:function(e,a,b,c){var d;
for(d=0;d<Math.max(b.length,c.length);d++){var g=d<b.length?b[d]:null;var k=d<c.length?c[d]:null;if(!g||!k||g!=k)break}if(!g&&!k)throw"Invalid ref/alt inputs";a=parseInt(a);g&&k?(a+=d,g=b.substr(d),k=c.substr(d)):(a=a+d-1,g=b.substr(d-1),k=c.substr(d-1));return[e,a,g,k]},format_hgvs:function(d,a,b,c){d.toLowerCase().startsWith("chr")&&(d=d.substr(3));if(b.length==c.length==1)return"chr"+d+":g."+a+b+"\x3e"+c;if(1<b.length&&1==c.length){if(b[0]==c)return c=parseInt(a)+1,b=parseInt(a)+b.length-1,c==
b?"chr"+d+":g."+c+"del":"chr"+d+":g."+c+"_"+b+"del";b=parseInt(a)+b.length-1;return"chr"+d+":g."+a+"_"+b+"delins"+c}if(1==b.length&&1<c.length)return c[0]==b?"chr"+d+":g."+a+"_"+(parseInt(a)+1)+"ins"+c.substr(1):"chr"+d+":g."+a+"delins"+c;if(1<b.length&&1<c.length){if(b[0]==c[0])return c=$jscomp.makeIterator(e.normalize_vcf(d,a,b,c)),d=c.next().value,a=c.next().value,b=c.next().value,c=c.next().value,console.log(d),e.format_hgvs(d,a,b,c);b=parseInt(a)+c.length-1;return"chr"+d+":g."+a+"_"+b+"delins"+
c}throw"Cannot convert "+JSON.stringify({chrom:d,pos:a,ref:b,alt:c})+" into HGVS id.";}}}}},{}]},{},[1])(1)});